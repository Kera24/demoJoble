{"ast":null,"code":"import _classCallCheck from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import CompanyInfo from\"../Company/CompanyInfo\";import EditJob from\"./EditJob\";import Apply from\"../Apply/Apply\";import'./CreateJob.css';import axios from'axios';import{UserType}from\"../Constants.js\";var Job=/*#__PURE__*/function(_Component){_inherits(Job,_Component);var _super=_createSuper(Job);function Job(props){var _this;_classCallCheck(this,Job);_this=_super.call(this,props);_this.state={viewCompanyInfo:false,applyToJob:false,editJob:false,deleted:false,errorMessage:\"\",applyDup:false,applied:[]};_this.reRender=_this.reRender.bind(_assertThisInitialized(_this));_this.deleteJob=_this.deleteJob.bind(_assertThisInitialized(_this));_this.checkApplyDup=_this.checkApplyDup.bind(_assertThisInitialized(_this));return _this;}_createClass(Job,[{key:\"reRender\",value:function reRender(){this.setState({viewCompanyInfo:false,applyToJob:false,editJob:false,errorMessage:\"\",applyDup:false,applied:[]});}},{key:\"checkApplyDup\",value:function checkApplyDup(){var _this2=this;axios.get(\"/applications/list?userName=\".concat(this.props.userName)).then(function(res){console.log(res);_this2.applied=res.data;if(_this2.applied.length===0){_this2.setState({applyDup:false,applyToJob:true});}else{for(var i=0;i<_this2.applied.length;i++){if(_this2.applied[i].userName===_this2.props.userName&&_this2.applied[i].jobTitle===_this2.props.job.jobTitle){_this2.setState({applyDup:true,applyToJob:false,applied:res.data});break;}else{_this2.setState({applyDup:false,applyToJob:true,applied:res.data});};};};console.log(\"checkpoint\");console.log(_this2.state.applyDup);console.log(_this2.state.applyToJob);}).catch(function(err){console.log(err);});}},{key:\"deleteJob\",value:function deleteJob(){var _this3=this;var job={jobTitle:this.props.job.jobTitle,companyName:this.props.job.companyName};axios.post('/jobs/delete',job).then(function(res){console.log(res.data);_this3.setState({deleted:true,errorMessage:\"\"});}).catch(function(err){// display error message\n_this3.setState({deleted:false,errorMessage:\"Posting could not be removed. Please try again\"});}).finally(function(){window.scrollTo(0,0);});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;setTimeout(function(){_this4.setState({favoritecolor:\"yellow\"});},700);}},{key:\"render\",value:function render(){var _this5=this;var jobTitle=this.props.job.jobTitle;var jobDesc=this.props.job.jobDesc;var salary=this.props.job.salary;var deadline=this.props.job.deadline||\"Not specified\";var companyName=this.props.job.companyName;var userInfo={userName:this.props.userName,userType:this.props.userType};// for google-maps api\nvar location=this.props.job.location;//console.log(location);\n//console.log(typeof(location));\nvar address=location.address;var city=location.city;var province=location.province;var finalString=address+\", \"+city+\", \"+province;var currJob={jobTitle:jobTitle,jobDesc:jobDesc,companyName:companyName,salary:salary,deadline:deadline,location:location};// cathan dont touch\nvar componentToRender;if(this.props.userType===UserType.STUDENT&&this.state.applyToJob&&!this.state.applyDup){componentToRender=/*#__PURE__*/React.createElement(Apply,{userInfo:userInfo,currJob:currJob,goBack:this.reRender});}else if(this.props.userType===UserType.STUDENT&&this.state.viewCompanyInfo){componentToRender=/*#__PURE__*/React.createElement(CompanyInfo,{companyName:companyName,userInfo:userInfo,goBack:this.reRender});}else if(this.props.userType===UserType.RECRUITER&&this.state.editJob){componentToRender=/*#__PURE__*/React.createElement(EditJob,{currJob:currJob});}else if(this.props.userType===UserType.STUDENT&&!this.state.applyToJob&&this.state.applyDup){componentToRender=/*#__PURE__*/React.createElement(\"div\",{style:{width:'50vw',height:'50vh'}},/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"/#\"},jobTitle)),/*#__PURE__*/React.createElement(\"hr\",null),this.state.deleted&&/*#__PURE__*/React.createElement(\"p\",{id:\"jobDeleteMessage\"},\"The posting has been removed. \"),/*#__PURE__*/React.createElement(\"p\",{id:\"errorMessage\"},this.state.errorMessage),!this.state.deleted&&/*#__PURE__*/React.createElement(\"table\",{className:\"table table-borderless\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Job Title\"),/*#__PURE__*/React.createElement(\"td\",null,jobTitle),/*#__PURE__*/React.createElement(\"th\",null,\"Salary\"),/*#__PURE__*/React.createElement(\"td\",null,salary)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Deadline\"),/*#__PURE__*/React.createElement(\"td\",null,deadline),/*#__PURE__*/React.createElement(\"th\",null,\"Company Name\"),/*#__PURE__*/React.createElement(\"td\",null,companyName)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Location\"),/*#__PURE__*/React.createElement(\"td\",null,finalString)))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"hr\",null),this.props.userType===UserType.STUDENT&&!this.state.deleted&&/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-primary\",onClick:function onClick(){return _this5.setState({viewCompanyInfo:true});}},\"View Company Info\"),this.props.userType===UserType.STUDENT&&!this.state.deleted&&/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-secondary\",onClick:function onClick(){_this5.checkApplyDup();_this5.reRender();}},\"Applied\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),!this.state.deleted&&/*#__PURE__*/React.createElement(\"h4\",null,\"Job Description\"),/*#__PURE__*/React.createElement(\"br\",null),!this.state.deleted&&/*#__PURE__*/React.createElement(\"p\",null,jobDesc),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null));}else{componentToRender=/*#__PURE__*/React.createElement(\"div\",{style:{width:'50vw',height:'50vh'}},/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"/#\"},jobTitle)),/*#__PURE__*/React.createElement(\"hr\",null),this.state.deleted&&/*#__PURE__*/React.createElement(\"p\",{id:\"jobDeleteMessage\"},\"The posting has been removed. \"),/*#__PURE__*/React.createElement(\"p\",{id:\"errorMessage\"},this.state.errorMessage),!this.state.deleted&&/*#__PURE__*/React.createElement(\"table\",{className:\"table table-borderless\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Job Title\"),/*#__PURE__*/React.createElement(\"td\",null,jobTitle),/*#__PURE__*/React.createElement(\"th\",null,\"Salary\"),/*#__PURE__*/React.createElement(\"td\",null,salary)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Deadline\"),/*#__PURE__*/React.createElement(\"td\",null,deadline),/*#__PURE__*/React.createElement(\"th\",null,\"Company Name\"),/*#__PURE__*/React.createElement(\"td\",null,companyName)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Location\"),/*#__PURE__*/React.createElement(\"td\",null,finalString)))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"hr\",null),this.props.userType===UserType.STUDENT&&!this.state.deleted&&/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-primary\",onClick:function onClick(){return _this5.setState({viewCompanyInfo:true});}},\"View Company Info\"),this.props.userType===UserType.STUDENT&&!this.state.deleted&&/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-primary\",onClick:function onClick(){_this5.checkApplyDup();_this5.reRender();}},\"Apply\"),this.props.userType===UserType.RECRUITER&&!this.state.deleted&&/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-primary\",onClick:function onClick(){return _this5.setState({editJob:true});}},\"Edit Job\"),this.props.userType===UserType.RECRUITER&&!this.state.deleted&&/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-danger\",onClick:function onClick(){return _this5.deleteJob();}},\"Delete\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),!this.state.deleted&&/*#__PURE__*/React.createElement(\"h4\",null,\"Job Description\"),/*#__PURE__*/React.createElement(\"br\",null),!this.state.deleted&&/*#__PURE__*/React.createElement(\"p\",null,jobDesc),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},componentToRender));}}]);return Job;}(Component);export{Job as default};","map":{"version":3,"sources":["/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/src/Jobs/Job.js"],"names":["React","Component","CompanyInfo","EditJob","Apply","axios","UserType","Job","props","state","viewCompanyInfo","applyToJob","editJob","deleted","errorMessage","applyDup","applied","reRender","bind","deleteJob","checkApplyDup","setState","get","userName","then","res","console","log","data","length","i","jobTitle","job","catch","err","companyName","post","finally","window","scrollTo","setTimeout","favoritecolor","jobDesc","salary","deadline","userInfo","userType","location","address","city","province","finalString","currJob","componentToRender","STUDENT","RECRUITER","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport CompanyInfo from \"../Company/CompanyInfo\";\nimport EditJob from \"./EditJob\";\nimport Apply from \"../Apply/Apply\";\nimport './CreateJob.css';\nimport axios from 'axios';\nimport { UserType } from \"../Constants.js\";\n\n\n\nexport default class Job extends Component {\n    constructor(props){\n        super(props);\n        this.state= {\n            viewCompanyInfo: false,\n            applyToJob: false,\n            editJob: false,\n            deleted: false,\n            errorMessage: \"\",\n            applyDup: false,\n            applied: [],\n        };\n\n        this.reRender = this.reRender.bind(this);\n        this.deleteJob = this.deleteJob.bind(this);\n        this.checkApplyDup = this.checkApplyDup.bind(this);\n    }\n\n    reRender() {\n        this.setState({\n            viewCompanyInfo: false,\n            applyToJob: false,\n            editJob: false,\n            errorMessage: \"\",\n            applyDup: false,\n            applied:[],\n        });\n    }\n\n    checkApplyDup(){\n        axios.get(`/applications/list?userName=${this.props.userName}`)\n        .then(res => {\n            console.log(res);\n            this.applied = res.data;\n            if (this.applied.length === 0){\n                this.setState({\n                    applyDup: false,\n                        applyToJob: true,\n                })\n            }else{\n                for (var i = 0; i < this.applied.length; i++)\n                {\n                    if(this.applied[i].userName === this.props.userName && this.applied[i].jobTitle === this.props.job.jobTitle)\n                    {   \n                        this.setState({\n                            applyDup: true,\n                            applyToJob: false,\n                            applied: res.data,\n                        });\n                        break;\n                    }else{\n                        this.setState({\n                            applyDup: false,\n                            applyToJob: true,\n                            applied: res.data,\n                        });\n                    };\n                };\n            };\n            console.log(\"checkpoint\");\n            console.log(this.state.applyDup);\n            console.log(this.state.applyToJob);\n        })\n        .catch(err => {\n            console.log(err);\n        })\n        \n    }\n\n    deleteJob() {\n        const job = {\n            jobTitle: this.props.job.jobTitle,\n            companyName: this.props.job.companyName,\n        };\n\n        axios.post('/jobs/delete', job)\n            .then((res) => {\n                console.log(res.data);\n                this.setState({\n                    deleted: true,\n                    errorMessage: \"\",\n                });\n            })\n            .catch((err) => {\n                // display error message\n                this.setState({\n                    deleted: false,\n                    errorMessage: \"Posting could not be removed. Please try again\",\n                });\n            })\n            .finally(() => {\n                window.scrollTo(0, 0);\n            });\n    }\n\n    componentDidMount() {\n\n        setTimeout(() => {\n            this.setState({favoritecolor: \"yellow\"})\n          }, 700);\n    }\n\n\n    render() {\n        const jobTitle = this.props.job.jobTitle;\n        const jobDesc = this.props.job.jobDesc;\n        const salary  = this.props.job.salary;\n        const deadline = this.props.job.deadline || \"Not specified\";\n        const companyName = this.props.job.companyName;\n\n        const userInfo = {\n            userName: this.props.userName,\n            userType: this.props.userType,\n        }\n\n        // for google-maps api\n        const location = this.props.job.location;\n        //console.log(location);\n        //console.log(typeof(location));\n        const address = location.address;\n        const city = location.city;\n        const province = location.province;\n        const finalString = address + \", \" + city + \", \" + province;\n\n        const currJob = {\n            jobTitle: jobTitle,\n            jobDesc: jobDesc,\n            companyName: companyName,\n            salary: salary,\n            deadline: deadline,\n            location: location,\n        };\n\n        // cathan dont touch\n\n       \n\n       \n\n        \n\n        let componentToRender;\n\n        if (this.props.userType === UserType.STUDENT && this.state.applyToJob && !this.state.applyDup) {\n            componentToRender = <Apply userInfo={userInfo} currJob={currJob} goBack={this.reRender} />\n        } else if (this.props.userType === UserType.STUDENT && this.state.viewCompanyInfo) {\n            componentToRender = <CompanyInfo companyName={companyName} userInfo={userInfo} goBack={this.reRender}/>\n        } else if (this.props.userType === UserType.RECRUITER && this.state.editJob) {\n            componentToRender = <EditJob currJob={currJob}/>\n        } else if (this.props.userType === UserType.STUDENT && !this.state.applyToJob && this.state.applyDup){\n            componentToRender = (\n                <div style={{width: '50vw', height: '50vh'}}>\n                    <h1><a href=\"/#\">{jobTitle}</a></h1>\n                    <hr/>\n                    {this.state.deleted && <p id=\"jobDeleteMessage\">The posting has been removed. </p>}\n                    <p id=\"errorMessage\">{this.state.errorMessage}</p>\n                    {! this.state.deleted && <table className=\"table table-borderless\">\n                        <tbody>\n                            <tr>\n                                <th>Job Title</th>\n                                <td>{jobTitle}</td>\n                                <th>Salary</th>\n                                <td>{salary}</td>\n                            </tr>\n                            <tr>\n                                <th>Deadline</th>\n                                <td>{deadline}</td>\n                                <th>Company Name</th>\n                                <td>{companyName}</td>\n                            </tr>\n                            <tr>\n                                <th>Location</th>\n                                <td>{finalString}</td>\n                            </tr>\n                        </tbody>\n                    </table>}\n                    <br/>\n                    <hr/>\n                    {this.props.userType === UserType.STUDENT && ! this.state.deleted && <button class=\"btn btn-primary\" onClick={() => this.setState({viewCompanyInfo:true})}>View Company Info</button>}\n                    {this.props.userType === UserType.STUDENT && ! this.state.deleted && <button class=\"btn btn-secondary\" onClick={() => {this.checkApplyDup();this.reRender()}}>Applied</button>}\n                    <br/>\n                    <br/>\n                    {! this.state.deleted && <h4>Job Description</h4>}<br/>\n                    {! this.state.deleted && <p>{jobDesc}</p>}\n                    <hr/>\n\n                   \n                    <br/>\n                </div>\n            );\n        }else {\n            componentToRender = (\n                <div style={{width: '50vw', height: '50vh'}}>\n                    <h1><a href=\"/#\">{jobTitle}</a></h1>\n                    <hr/>\n                    {this.state.deleted && <p id=\"jobDeleteMessage\">The posting has been removed. </p>}\n                    <p id=\"errorMessage\">{this.state.errorMessage}</p>\n                    {! this.state.deleted && <table className=\"table table-borderless\">\n                        <tbody>\n                            <tr>\n                                <th>Job Title</th>\n                                <td>{jobTitle}</td>\n                                <th>Salary</th>\n                                <td>{salary}</td>\n                            </tr>\n                            <tr>\n                                <th>Deadline</th>\n                                <td>{deadline}</td>\n                                <th>Company Name</th>\n                                <td>{companyName}</td>\n                            </tr>\n                            <tr>\n                                <th>Location</th>\n                                <td>{finalString}</td>\n                            </tr>\n                        </tbody>\n                    </table>}\n                    <br/>\n                    <hr/>\n                    {this.props.userType === UserType.STUDENT && ! this.state.deleted && <button class=\"btn btn-primary\" onClick={() => this.setState({viewCompanyInfo:true})}>View Company Info</button>}\n                    {this.props.userType === UserType.STUDENT && ! this.state.deleted && <button class=\"btn btn-primary\" onClick={() => {this.checkApplyDup();this.reRender()}}>Apply</button>}\n                    {this.props.userType === UserType.RECRUITER && ! this.state.deleted && <button class=\"btn btn-primary\" onClick={() => this.setState({editJob: true})}>Edit Job</button>}\n                    {this.props.userType === UserType.RECRUITER && ! this.state.deleted && <button class=\"btn btn-danger\" onClick={() => this.deleteJob()}>Delete</button>}\n                    <br/>\n                    <br/>\n                    {! this.state.deleted && <h4>Job Description</h4>}<br/>\n                    {! this.state.deleted && <p>{jobDesc}</p>}\n                    <hr/>\n\n                    <br/>\n                </div>\n            );\n        }\n\n        return (\n            <React.Fragment>\n                <div className=\"container\">\n                    {componentToRender}\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}