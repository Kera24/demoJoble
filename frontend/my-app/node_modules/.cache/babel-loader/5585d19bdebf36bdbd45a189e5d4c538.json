{"ast":null,"code":"import _classCallCheck from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";// Tabs needed: Create job, View Job,\nimport React,{Component}from'react';import axios from'axios';// import './CompanyInfo.css';\nvar CompanyReview=/*#__PURE__*/function(_Component){_inherits(CompanyReview,_Component);var _super=_createSuper(CompanyReview);function CompanyReview(props){var _this;_classCallCheck(this,CompanyReview);_this=_super.call(this,props);_this.state={displayReviewForm:false,displayReviews:true,reviews:[{reviewStars:1,reviewDesc:'',user:\"\"}],givenStars:3,givenDesc:\"\",viewReviewsError:\"\"};_this.addReview=_this.addReview.bind(_assertThisInitialized(_this));_this.postReview=_this.postReview.bind(_assertThisInitialized(_this));_this.handleStars=_this.handleStars.bind(_assertThisInitialized(_this));_this.handleReviewDesc=_this.handleReviewDesc.bind(_assertThisInitialized(_this));_this.getReviews();return _this;}_createClass(CompanyReview,[{key:\"addReview\",value:function addReview(){this.setState({displayReviewForm:true});}},{key:\"handleStars\",value:function handleStars(event){this.setState({givenStars:event.target.value});}},{key:\"handleReviewDesc\",value:function handleReviewDesc(event){this.setState({givenDesc:event.target.value});}},{key:\"postReview\",value:function postReview(){var _this2=this;var review={userName:this.props.userInfo.userName,companyName:this.props.companyInfo.name,stars:this.state.givenStars,desc:this.state.givenDesc};axios.post(\"/reviews/addReview\",review).then(function(res){console.log(res.data);// display success message and ask if wanna go back\n_this2.getReviews();}).catch(function(err){document.getElementById(\"viewReviewsError\").style.color=\"red\";_this2.setState({displayReviewForm:false,displayReviews:false,viewReviewsError:\"There was a problem completing your request. Please try again later.\"});window.scrollTo(0,0);});}},{key:\"getReviews\",value:function getReviews(){var _this3=this;axios.get(\"/reviews/getReviews?companyName=\".concat(this.props.companyInfo.name)).then(function(res){console.log(res.data);if(!res.data.length){_this3.setState({displayReviewForm:true,// no reviews to show so add your own\ndisplayReviews:false,viewReviewsError:\"\"});}else{// reviews exist\nvar currentReviews=[];res.data.forEach(function(review){var newReview={reviewStars:review.stars,reviewDesc:review.desc,user:review.user};currentReviews.push(newReview);});_this3.setState({reviews:currentReviews.reverse(),displayReviewForm:false,displayReviews:true});}}).catch(function(err){// display error message\ndocument.getElementById(\"viewCompany\").style.color=\"red\";_this3.setState({displayReviewForm:false,displayReviews:false,viewReviewsError:\"There was a problem completing your request. Please try again later.\"});window.scrollTo(0,0);});}},{key:\"render\",value:function render(){var _this4=this;var componentToServe;if(this.state.viewReviewsError===\"\"&&this.state.displayReviewForm){if(this.props.userInfo.userType!=='recruiter'){componentToServe=/*#__PURE__*/React.createElement(\"form\",{className:\"myForm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"stars\"},\"Rating [1-5]\"),/*#__PURE__*/React.createElement(\"input\",{type:\"range\",className:\"form-control\",id:\"reviewStars\",min:\"1\",max:\"5\",value:this.state.givenStars,onChange:this.handleStars})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"desc\"},\"Description\"),/*#__PURE__*/React.createElement(\"textarea\",{rows:\"10\",cols:\"75\",className:\"form-control\",id:\"reviewDesc\",value:this.state.givenDesc,onChange:this.handleReviewDesc})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:this.postReview},\"Post\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:function onClick(){return _this4.setState({displayReviewForm:false,displayReviews:true});}},\"View Reviews\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null));}else{componentToServe=/*#__PURE__*/React.createElement(\"h5\",null,\"No reviews added!\");}}else if(this.state.viewReviewsError===\"\"&&this.state.displayReviews){componentToServe=/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},this.state.reviews.map(function(review,ind){return/*#__PURE__*/React.createElement(\"a\",{key:ind,href:\"/#\",id:\"review-list\",className:\"list-group-item list-group-item-action flex-column align-items-start\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex w-100 justify-content-between\"},/*#__PURE__*/React.createElement(\"h5\",null,review.user),/*#__PURE__*/React.createElement(\"small\",null,\"Rating: \",review.reviewStars)),/*#__PURE__*/React.createElement(\"p\",null,review.reviewDesc));}));}else{componentToServe=/*#__PURE__*/React.createElement(\"p\",{id:\"viewReviewsError\"},this.state.viewReviewsError);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},this.props.userInfo.userType!=='recruiter'&&/*#__PURE__*/React.createElement(\"button\",{id:\"add-review\",class:\"btn btn-primary float-right\",onClick:this.addReview},\"Add review\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Reviews\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"hr\",null),componentToServe));}}]);return CompanyReview;}(Component);export{CompanyReview as default};","map":{"version":3,"sources":["/home/samspei0l/Documents/projects/go/myBetterExperience/frontend/my-app/src/Company/CompanyReview.js"],"names":["React","Component","axios","CompanyReview","props","state","displayReviewForm","displayReviews","reviews","reviewStars","reviewDesc","user","givenStars","givenDesc","viewReviewsError","addReview","bind","postReview","handleStars","handleReviewDesc","getReviews","setState","event","target","value","review","userName","userInfo","companyName","companyInfo","name","stars","desc","post","then","res","console","log","data","catch","err","document","getElementById","style","color","window","scrollTo","get","length","currentReviews","forEach","newReview","push","reverse","componentToServe","userType","map","ind"],"mappings":"27BAAA;AACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;GAEqBC,CAAAA,a,8GACjB,uBAAYC,KAAZ,CAAkB,+CACd,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,CACTC,iBAAiB,CAAE,KADV,CAETC,cAAc,CAAE,IAFP,CAGTC,OAAO,CAAE,CAAE,CACPC,WAAW,CAAE,CADN,CAEPC,UAAU,CAAE,EAFL,CAGPC,IAAI,CAAE,EAHC,CAAF,CAHA,CAQTC,UAAU,CAAE,CARH,CASTC,SAAS,CAAE,EATF,CAUTC,gBAAgB,CAAE,EAVT,CAAb,CAaA,MAAKC,SAAL,CAAiB,MAAKA,SAAL,CAAeC,IAAf,+BAAjB,CACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBD,IAAhB,+BAAlB,CACA,MAAKE,WAAL,CAAmB,MAAKA,WAAL,CAAiBF,IAAjB,+BAAnB,CACA,MAAKG,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBH,IAAtB,+BAAxB,CAEA,MAAKI,UAAL,GArBc,aAsBjB,C,uEAEW,CACR,KAAKC,QAAL,CAAc,CAACf,iBAAiB,CAAE,IAApB,CAAd,EACH,C,gDAEWgB,K,CAAO,CACf,KAAKD,QAAL,CAAc,CAACT,UAAU,CAAEU,KAAK,CAACC,MAAN,CAAaC,KAA1B,CAAd,EACH,C,0DAEgBF,K,CAAO,CACpB,KAAKD,QAAL,CAAc,CAACR,SAAS,CAAES,KAAK,CAACC,MAAN,CAAaC,KAAzB,CAAd,EACH,C,+CAEY,iBAET,GAAMC,CAAAA,MAAM,CAAG,CACXC,QAAQ,CAAE,KAAKtB,KAAL,CAAWuB,QAAX,CAAoBD,QADnB,CAEXE,WAAW,CAAE,KAAKxB,KAAL,CAAWyB,WAAX,CAAuBC,IAFzB,CAGXC,KAAK,CAAE,KAAK1B,KAAL,CAAWO,UAHP,CAIXoB,IAAI,CAAE,KAAK3B,KAAL,CAAWQ,SAJN,CAAf,CAOAX,KAAK,CAAC+B,IAAN,sBAAiCR,MAAjC,EACCS,IADD,CACM,SAACC,GAAD,CAAS,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,EACA;AACA,MAAI,CAAClB,UAAL,GACH,CALD,EAMCmB,KAND,CAMO,SAACC,GAAD,CAAS,CACZC,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDC,KAAlD,CAA0D,KAA1D,CACA,MAAI,CAACvB,QAAL,CAAc,CACVf,iBAAiB,CAAE,KADT,CAEVC,cAAc,CAAE,KAFN,CAGVO,gBAAgB,CAAE,sEAHR,CAAd,EAKA+B,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACH,CAdD,EAeH,C,+CAEY,iBACT5C,KAAK,CAAC6C,GAAN,2CAA6C,KAAK3C,KAAL,CAAWyB,WAAX,CAAuBC,IAApE,GACCI,IADD,CACM,SAACC,GAAD,CAAS,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,EAEA,GAAI,CAAEH,GAAG,CAACG,IAAJ,CAASU,MAAf,CAAuB,CACnB,MAAI,CAAC3B,QAAL,CAAc,CACVf,iBAAiB,CAAE,IADT,CACsB;AAChCC,cAAc,CAAE,KAFN,CAGVO,gBAAgB,CAAE,EAHR,CAAd,EAKH,CAND,IAMO,CACH;AACA,GAAImC,CAAAA,cAAc,CAAG,EAArB,CACAd,GAAG,CAACG,IAAJ,CAASY,OAAT,CAAiB,SAACzB,MAAD,CAAY,CACzB,GAAI0B,CAAAA,SAAS,CAAG,CACZ1C,WAAW,CAAEgB,MAAM,CAACM,KADR,CAEZrB,UAAU,CAAEe,MAAM,CAACO,IAFP,CAGZrB,IAAI,CAAEc,MAAM,CAACd,IAHD,CAAhB,CAMAsC,cAAc,CAACG,IAAf,CAAoBD,SAApB,EACH,CARD,EAUA,MAAI,CAAC9B,QAAL,CAAc,CACVb,OAAO,CAAEyC,cAAc,CAACI,OAAf,EADC,CAEV/C,iBAAiB,CAAE,KAFT,CAGVC,cAAc,CAAE,IAHN,CAAd,EAKH,CACJ,CA7BD,EA8BCgC,KA9BD,CA8BO,SAACC,GAAD,CAAS,CACZ;AACAC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CC,KAA7C,CAAqD,KAArD,CACA,MAAI,CAACvB,QAAL,CAAc,CACVf,iBAAiB,CAAE,KADT,CAEVC,cAAc,CAAE,KAFN,CAGVO,gBAAgB,CAAE,sEAHR,CAAd,EAKA+B,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACH,CAvCD,EAwCH,C,uCAEQ,iBACL,GAAIQ,CAAAA,gBAAJ,CAEA,GAAI,KAAKjD,KAAL,CAAWS,gBAAX,GAAgC,EAAhC,EAAsC,KAAKT,KAAL,CAAWC,iBAArD,CAAwE,CACpE,GAAI,KAAKF,KAAL,CAAWuB,QAAX,CAAoB4B,QAApB,GAAiC,WAArC,CAAkD,CAC9CD,gBAAgB,cAAI,4BAAM,SAAS,CAAC,QAAhB,eACpB,2BAAK,SAAS,CAAC,YAAf,eACI,6BAAO,OAAO,CAAC,OAAf,iBADJ,cAEI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAC,cAA9B,CAA6C,EAAE,CAAC,aAAhD,CAA8D,GAAG,CAAC,GAAlE,CAAsE,GAAG,CAAC,GAA1E,CAA8E,KAAK,CAAE,KAAKjD,KAAL,CAAWO,UAAhG,CAA4G,QAAQ,CAAE,KAAKM,WAA3H,EAFJ,CADoB,cAKpB,2BAAK,SAAS,CAAC,YAAf,eACI,6BAAO,OAAO,CAAC,MAAf,gBADJ,cAEI,gCAAU,IAAI,CAAC,IAAf,CAAoB,IAAI,CAAC,IAAzB,CAA8B,SAAS,CAAC,cAAxC,CAAuD,EAAE,CAAC,YAA1D,CAAuE,KAAK,CAAE,KAAKb,KAAL,CAAWQ,SAAzF,CAAoG,QAAQ,CAAE,KAAKM,gBAAnH,EAFJ,CALoB,cASpB,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,OAAO,CAAE,KAAKF,UAAhE,SAToB,cAUpB,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACI,QAAL,CAAc,CAACf,iBAAiB,CAAE,KAApB,CAA2BC,cAAc,CAAE,IAA3C,CAAd,CAAN,EAA3D,iBAVoB,cAWpB,8BAXoB,cAWf,8BAXe,CAApB,CAaH,CAdD,IAcO,CACH+C,gBAAgB,cAChB,kDADA,CAEH,CACJ,CAnBD,IAmBO,IAAI,KAAKjD,KAAL,CAAWS,gBAAX,GAAgC,EAAhC,EAAsC,KAAKT,KAAL,CAAWE,cAArD,CAAqE,CACxE+C,gBAAgB,cAAI,2BAAK,SAAS,CAAC,YAAf,EACnB,KAAKjD,KAAL,CAAWG,OAAX,CAAmBgD,GAAnB,CAAuB,SAAC/B,MAAD,CAASgC,GAAT,qBACpB,yBAAG,GAAG,CAAEA,GAAR,CAAa,IAAI,CAAC,IAAlB,CAAuB,EAAE,CAAC,aAA1B,CAAwC,SAAS,CAAC,sEAAlD,eACI,2BAAK,SAAS,CAAC,sCAAf,eACA,8BAAKhC,MAAM,CAACd,IAAZ,CADA,cAEA,4CAAgBc,MAAM,CAAChB,WAAvB,CAFA,CADJ,cAKI,6BAAIgB,MAAM,CAACf,UAAX,CALJ,CADoB,EAAvB,CADmB,CAApB,CAUH,CAXM,IAWA,CACH4C,gBAAgB,cAAG,yBAAG,EAAE,CAAC,kBAAN,EAA0B,KAAKjD,KAAL,CAAWS,gBAArC,CAAnB,CACH,CACD,mBACI,oBAAC,KAAD,CAAO,QAAP,mBACI,2BAAK,SAAS,CAAC,WAAf,EACC,KAAKV,KAAL,CAAWuB,QAAX,CAAoB4B,QAApB,GAAiC,WAAjC,eAAgD,8BAAQ,EAAE,CAAC,YAAX,CAAwB,KAAK,CAAC,6BAA9B,CAA4D,OAAO,CAAE,KAAKxC,SAA1E,eADjD,cAEA,wCAFA,cAGA,8BAHA,cAIA,8BAJA,CAKCuC,gBALD,CADJ,CADJ,CAWH,C,2BAzJsCrD,S,SAAtBE,a","sourcesContent":["// Tabs needed: Create job, View Job,\nimport React, { Component } from 'react';\nimport axios from 'axios';\n// import './CompanyInfo.css';\n\nexport default class CompanyReview extends Component {\n    constructor(props){\n        super(props);\n\n        this.state = {\n            displayReviewForm: false,\n            displayReviews: true,\n            reviews: [ {\n                reviewStars: 1,\n                reviewDesc: '',\n                user: \"\",\n            }],\n            givenStars: 3,\n            givenDesc: \"\",\n            viewReviewsError: \"\",\n        }\n\n        this.addReview = this.addReview.bind(this);\n        this.postReview = this.postReview.bind(this);\n        this.handleStars = this.handleStars.bind(this);\n        this.handleReviewDesc = this.handleReviewDesc.bind(this);\n\n        this.getReviews();\n    }\n\n    addReview() {\n        this.setState({displayReviewForm: true});\n    }\n\n    handleStars(event) {\n        this.setState({givenStars: event.target.value});\n    }\n\n    handleReviewDesc(event) {\n        this.setState({givenDesc: event.target.value});\n    }\n\n    postReview() {\n\n        const review = {\n            userName: this.props.userInfo.userName,\n            companyName: this.props.companyInfo.name,\n            stars: this.state.givenStars,\n            desc: this.state.givenDesc,\n        }\n\n        axios.post(`/reviews/addReview`, review)\n        .then((res) => {\n            console.log(res.data);\n            // display success message and ask if wanna go back\n            this.getReviews();\n        })\n        .catch((err) => {\n            document.getElementById(\"viewReviewsError\").style.color = \"red\";\n            this.setState({\n                displayReviewForm: false,\n                displayReviews: false,\n                viewReviewsError: \"There was a problem completing your request. Please try again later.\",\n            });\n            window.scrollTo(0, 0);\n        });\n    }\n\n    getReviews() {\n        axios.get(`/reviews/getReviews?companyName=${this.props.companyInfo.name}`)\n        .then((res) => {\n            console.log(res.data);\n\n            if (! res.data.length) {\n                this.setState({\n                    displayReviewForm: true,        // no reviews to show so add your own\n                    displayReviews: false,\n                    viewReviewsError: \"\",\n                });\n            } else {\n                // reviews exist\n                let currentReviews = [];\n                res.data.forEach((review) => {\n                    let newReview = {\n                        reviewStars: review.stars,\n                        reviewDesc: review.desc,\n                        user: review.user,\n                    };\n\n                    currentReviews.push(newReview);\n                });\n\n                this.setState({\n                    reviews: currentReviews.reverse(),\n                    displayReviewForm: false,\n                    displayReviews: true,\n                });\n            }\n        })\n        .catch((err) => {\n            // display error message\n            document.getElementById(\"viewCompany\").style.color = \"red\";\n            this.setState({\n                displayReviewForm: false,\n                displayReviews: false,\n                viewReviewsError: \"There was a problem completing your request. Please try again later.\",\n            });\n            window.scrollTo(0, 0);\n        });\n    }\n\n    render() {\n        let componentToServe;\n\n        if (this.state.viewReviewsError === \"\" && this.state.displayReviewForm) {\n            if (this.props.userInfo.userType !== 'recruiter') {\n                componentToServe = (<form className=\"myForm\">\n                <div className=\"form-group\">\n                    <label htmlFor=\"stars\">Rating [1-5]</label>\n                    <input type=\"range\" className=\"form-control\" id=\"reviewStars\" min=\"1\" max=\"5\" value={this.state.givenStars} onChange={this.handleStars}/>\n                </div>\n                <div className=\"form-group\">\n                    <label htmlFor=\"desc\">Description</label>\n                    <textarea rows=\"10\" cols=\"75\" className=\"form-control\" id=\"reviewDesc\" value={this.state.givenDesc} onChange={this.handleReviewDesc} />\n                </div>\n                <button type=\"button\" className=\"btn btn-primary\" onClick={this.postReview}>Post</button>\n                <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.setState({displayReviewForm: false, displayReviews: true})}>View Reviews</button>\n                <br/><br/>\n                </form>);\n            } else {\n                componentToServe = (\n                <h5>No reviews added!</h5>);\n            }\n        } else if (this.state.viewReviewsError === \"\" && this.state.displayReviews) {\n            componentToServe =  <div className=\"list-group\">\n            {this.state.reviews.map((review, ind) => (\n                <a key={ind} href=\"/#\" id=\"review-list\" className=\"list-group-item list-group-item-action flex-column align-items-start\">\n                    <div className=\"d-flex w-100 justify-content-between\">\n                    <h5>{review.user}</h5>\n                    <small>Rating: {review.reviewStars}</small>\n                    </div>\n                    <p>{review.reviewDesc}</p>\n                </a>\n            ))}</div>;\n        } else {\n            componentToServe = <p id=\"viewReviewsError\">{this.state.viewReviewsError}</p>\n        }\n        return (\n            <React.Fragment>\n                <div className=\"container\">\n                {this.props.userInfo.userType !== 'recruiter' && <button id=\"add-review\" class=\"btn btn-primary float-right\" onClick={this.addReview}>Add review</button>}\n                <h3>Reviews</h3>\n                <br/>\n                <hr/>\n                {componentToServe}\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}